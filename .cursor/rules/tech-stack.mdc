---
description: Current technology stack snapshot for Pindeck
globs: **/*
alwaysApply: true
---
# Pindeck Technology Stack

This file reflects the stack currently used by the app. Versions should be validated against `package.json` when changing dependencies.

## Architecture

- Frontend: React + TypeScript + Vite
- Backend: Convex (queries/mutations/actions + HTTP routes + storage)
- Auth: `@convex-dev/auth`
- UI: Radix Themes + Radix Icons + Tailwind CSS
- Data Table: TanStack Table
- Notifications: Sonner
- AI analysis: OpenRouter-compatible chat vision requests (via OpenAI SDK)
- AI image generation: fal.ai Nano Banana Pro edit endpoint
- Discord integration: separate Bun bot service in `services/discord-bot`

## Runtime Dependencies (key)

- `react`, `react-dom`
- `convex`, `@convex-dev/auth`
- `openai`
- `@fal-ai/client`
- `@radix-ui/themes`, `@radix-ui/react-icons`
- `@tanstack/react-table`
- `sonner`
- `clsx`, `tailwind-merge`

## Dev Tooling

- Bun package manager (`packageManager` in `package.json`)
- Vite build/dev server
- TypeScript
- ESLint + TypeScript ESLint
- Playwright present for browser automation/testing support

## AI Stack Notes (current behavior)

- Image analysis metadata is generated in Convex actions (`convex/vision.ts`) using OpenRouter-compatible requests.
- Variation generation is explicit (post-review), not auto-run at upload.
- Prompt planning has a shared builder for preview/runtime consistency.
- Variation generation writes child images with lineage (`parentImageId`) and metadata inheritance.

## Discord Stack Notes

- Bot runtime is a separate long-running Bun process (not Vercel frontend).
- Bot uses Convex HTTP endpoints for ingest and moderation:
  - `/ingestExternal`
  - `/discordQueue`
  - `/discordModerate`
- Webhook channel status messages come from Convex `discordNotifications` action.

## Source of Truth

- Dependency versions: `package.json`
- Scripts: `package.json` scripts section
- Backend capabilities: `convex/*.ts`
- Bot behavior: `services/discord-bot/src/index.js`
